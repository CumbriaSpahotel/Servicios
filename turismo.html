<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Turismo - Hotel Cumbria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Lato', sans-serif;
            background-color: #1c1917;
            /* stone-900 */
            color: white;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }

        h1,
        h2,
        h3 {
            font-family: 'Playfair Display', serif;
        }

        /* Hide Scrollbar but keep functionality */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col bg-stone-900">

    <!-- Floating Nav -->
    <div class="fixed top-0 left-0 w-full z-50 p-6 flex justify-between items-center pointer-events-none">
        <a href="index.html"
            class="pointer-events-auto w-10 h-10 rounded-full bg-black/30 backdrop-blur-md flex items-center justify-center text-white hover:bg-black/50 transition border border-white/10">
            <i data-lucide="arrow-left" class="w-5 h-5"></i>
        </a>
    </div>

    <!-- Hero Video Section -->
    <div class="relative w-full aspect-[16/9] lg:aspect-[21/9] sticky top-0 z-0">
        <iframe id="tourism-frame" class="w-full h-full object-cover" src="" title="YouTube Tourism Video"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen></iframe>
        <div
            class="absolute inset-0 bg-gradient-to-t from-stone-900 via-transparent to-transparent pointer-events-none">
        </div>
    </div>

    <!-- Main Content Container -->
    <div class="relative z-10 -mt-12 flex-1 flex flex-col">

        <!-- Intro Card -->
        <div
            class="relative px-6 pt-5 pb-2 rounded-t-[2rem] shadow-[0_-10px_40px_rgba(0,0,0,0.5)] overflow-hidden group">
            <!-- Background Image -->
            <div class="absolute inset-0 z-0 cursor-pointer"
                onclick="openImageModal('Imagenes/CIUDAD REAL GIGANTES, CASTILLOS Y NATURALEZA.png')">
                <img src="Imagenes/CIUDAD REAL GIGANTES, CASTILLOS Y NATURALEZA.png"
                    class="w-full h-full object-cover opacity-80 transition duration-700 group-hover:scale-105">
                <div class="absolute inset-0 bg-gradient-to-b from-stone-900/70 via-stone-900/60 to-stone-900"></div>
            </div>

            <!-- Expand Button -->
            <button onclick="openImageModal('Imagenes/CIUDAD REAL GIGANTES, CASTILLOS Y NATURALEZA.png')"
                class="absolute top-4 right-4 z-20 p-2 bg-black/30 backdrop-blur rounded-full text-white/70 hover:text-white hover:bg-black/50 transition border border-white/10">
                <i data-lucide="maximize-2" class="w-4 h-4"></i>
            </button>

            <!-- Content -->
            <div class="relative z-10 pointer-events-none">
                <div class="w-10 h-1 bg-white/20 rounded-full mx-auto mb-4"></div>

                <div class="flex items-center gap-2 mb-1 pointer-events-auto">
                    <span
                        class="px-2 py-0.5 rounded text-amber-500 text-[9px] font-bold uppercase tracking-wider border border-amber-500/20 shadow-sm bg-black/20">Guía</span>
                </div>
                <h1 class="text-2xl font-bold text-white mb-2 leading-tight drop-shadow-md">Ciudad Real <span
                        class="text-stone-400 font-serif italic">Experience</span></h1>

                <!-- Dynamic Description & Video Row -->
                <div class="flex flex-col sm:flex-row gap-4 mb-6 items-start">
                    <!-- Description -->
                    <div class="prose prose-invert prose-stone max-w-none flex-1">
                        <p id="tourism-desc"
                            class="text-stone-100 text-sm leading-relaxed whitespace-pre-line border-l-2 border-amber-500/80 pl-4 py-1 drop-shadow-sm font-medium">
                            <!-- Loaded from db.js -->
                        </p>
                    </div>

                    <!-- Mini Video Player -->
                    <div class="shrink-0 w-full sm:w-48 group self-center sm:self-start">
                        <div
                            class="rounded-lg overflow-hidden shadow-lg border border-white/20 aspect-video relative bg-black ring-1 ring-black/20">
                            <iframe id="promo-frame" class="w-full h-full" src="" title="Spa Presentation"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
                            </iframe>
                        </div>
                        <p
                            class="text-[9px] text-center text-stone-300 mt-1 uppercase tracking-wider font-bold group-hover:text-amber-400 transition drop-shadow-sm">
                            Ver Video</p>
                    </div>
                </div>

                <!-- New Minimalist Icons Row (Cultura & Shopping) -->
                <div class="flex items-center gap-8 pl-4 pb-4">

                    <!-- Icon: Cultura -->
                    <a href="https://www.google.com/maps/search/Monumentos+Ciudad+Real" target="_blank"
                        class="group flex flex-col items-center gap-2">
                        <div
                            class="w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center group-hover:bg-indigo-500/20 group-hover:border-indigo-500/50 transition duration-300">
                            <i data-lucide="landmark"
                                class="w-5 h-5 text-indigo-300 group-hover:text-indigo-200 transition"></i>
                        </div>
                        <span
                            class="text-[10px] font-bold uppercase tracking-wider text-stone-400 group-hover:text-indigo-300 transition">Cultura</span>
                    </a>

                    <!-- Icon: Shopping -->
                    <a href="https://www.google.com/maps/search/Shopping+Ciudad+Real" target="_blank"
                        class="group flex flex-col items-center gap-2">
                        <div
                            class="w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center group-hover:bg-pink-500/20 group-hover:border-pink-500/50 transition duration-300">
                            <i data-lucide="shopping-bag"
                                class="w-5 h-5 text-pink-300 group-hover:text-pink-200 transition"></i>
                        </div>
                        <span
                            class="text-[10px] font-bold uppercase tracking-wider text-stone-400 group-hover:text-pink-300 transition">Shopping</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Dynamic Excursions List -->
        <div id="excursions-container" class="bg-stone-900 pb-8 flex flex-col">
            <!-- Headers and items injected by JS -->
        </div>

        <!-- Map Button -->
        <div class="px-6 pb-8">
            <a href="https://www.google.com/maps/search/Turismo+Ciudad+Real" target="_blank"
                class="rounded-xl bg-stone-800/30 border border-dashed border-stone-700 hover:bg-stone-800 transition py-3 flex items-center justify-center gap-2 text-stone-500 text-xs group active:scale-95">
                <i data-lucide="map" class="w-4 h-4 group-hover:text-stone-300 transition"></i>
                <span class="font-medium group-hover:text-stone-300">Ver mapa general</span>
            </a>
        </div>

        <!-- Footer Info -->
        <div class="px-8 pb-12 text-center opacity-40">
            <p class="text-[10px] text-stone-500">
                Hotel Cumbria • Guía Turística<br>
                Ciudad Real
            </p>
        </div>

    </div>

    <!-- Generic Image Modal -->
    <div id="image-modal"
        class="fixed inset-0 z-[100] flex items-center justify-center bg-black/95 opacity-0 pointer-events-none transition-opacity duration-300 backdrop-blur-sm"
        onclick="closeImageModal()">
        <img id="image-modal-src" src=""
            class="max-w-full max-h-[90vh] object-contain shadow-2xl rounded-lg scale-90 transition-transform duration-300">
        <button onclick="closeImageModal()" class="absolute top-4 right-4 text-white/50 hover:text-white p-2">
            <i data-lucide="x" class="w-8 h-8"></i>
        </button>
    </div>

    <script src="db.js"></script>
    <script>
        lucide.createIcons();
        const appData = DB.get();

        function openImageModal(src) {
            const modal = document.getElementById('image-modal');
            const img = document.getElementById('image-modal-src');
            img.src = src;

            modal.classList.remove('opacity-0', 'pointer-events-none');
            // Animate check
            setTimeout(() => {
                img.classList.remove('scale-90');
                img.classList.add('scale-100');
            }, 10);
        }

        function closeImageModal() {
            const modal = document.getElementById('image-modal');
            const img = document.getElementById('image-modal-src');

            img.classList.remove('scale-100');
            img.classList.add('scale-90');
            modal.classList.add('opacity-0', 'pointer-events-none');
        }

        if (appData.tourism) {
            // 1. Main Hero Video
            const tFrame = document.getElementById('tourism-frame');
            if (tFrame && appData.tourism.videoUrl) {
                tFrame.src = appData.tourism.videoUrl;
            }

            // 2. Description Text
            if (appData.tourism.desc) {
                const tDesc = document.getElementById('tourism-desc');
                if (tDesc) tDesc.textContent = appData.tourism.desc;
            }

            // 3. Small Promo Video
            const promoFrame = document.getElementById('promo-frame');
            if (promoFrame && appData.tourism.videoUrlPromo) {
                promoFrame.src = appData.tourism.videoUrlPromo;
            }

            // 4. Render Excursions
            const container = document.getElementById('excursions-container');
            if (container && appData.tourism.excursions) {

                // Group by Type (optional) or just list. 
                // Let's create a "Destacados" header if not present.
                // Or follow original layout: Header -> Items.

                container.innerHTML = '';

                // Add Header
                container.innerHTML += `
                    <div class="px-6 pt-4 pb-2 sticky top-0 z-20 bg-stone-900/95 backdrop-blur-md">
                        <h2 class="text-lg font-bold text-white flex items-center gap-2">
                            <i data-lucide="compass" class="w-4 h-4 text-amber-500"></i>
                            Experiencias
                        </h2>
                    </div>
                    <div class="px-6 flex flex-col gap-3">
                `;

                const listDiv = document.createElement('div');
                listDiv.className = "px-6 flex flex-col gap-3";

                appData.tourism.excursions.forEach(exc => {
                    const color = exc.color || 'amber';
                    const colors = {
                        amber: 'text-amber-400 group-hover:text-amber-300',
                        emerald: 'text-emerald-400 group-hover:text-emerald-300',
                        rose: 'text-rose-400 group-hover:text-rose-300',
                        blue: 'text-blue-400 group-hover:text-blue-300'
                    };
                    const textClass = colors[color] || colors.amber;

                    const html = `
                    <a href="excursion.html?id=${exc.id}"
                        class="group relative overflow-hidden rounded-xl bg-stone-800 border border-white/5 active:scale-95 transition flex items-stretch min-h-32 shadow-lg">
                        
                        <!-- Image Section -->
                        <div class="w-32 shrink-0 bg-stone-700 flex items-center justify-center relative z-10 overflow-hidden">
                            <img src="${exc.image}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700 opacity-90 group-hover:opacity-100">
                        </div>

                        <!-- Text Section -->
                        <div class="flex-1 p-4 flex flex-col justify-center relative z-10 bg-stone-800 border-l border-white/5">
                            <h3 class="font-serif font-bold text-lg text-white mb-2 transition ${textClass}">
                                ${exc.title}
                            </h3>
                            <p class="text-[10px] text-stone-300 leading-relaxed line-clamp-3">
                                ${exc.description || exc.shortDesc || ''}
                            </p>
                        </div>

                        <!-- Arrow Icon -->
                        <div class="w-8 flex items-center justify-center text-stone-500 bg-stone-800 transition pr-2 relative z-10 ${textClass}">
                            <i data-lucide="chevron-right" class="w-5 h-5"></i>
                        </div>
                    </a>
                    `;
                    listDiv.innerHTML += html;
                });

                // Check for empty
                if (appData.tourism.excursions.length === 0) {
                    listDiv.innerHTML = '<p class="text-stone-500 text-center text-sm py-4">No hay excursiones disponibles.</p>';
                }

                container.appendChild(listDiv);
                lucide.createIcons();
            }
        }
    </script>
</body>

</html>